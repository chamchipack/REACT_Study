## SOCKET.IO의 근본인 웹소켓이란?
WebSocket은 서버와 클라이언트 간에 연결을 유지해서 언제든 양방향 통신 또는 데이터 전송이 가능하도록 하는 기술이다.

## 웹소켓을 왜쓸까?
기존의 서버와 클라이언트 간의 통신은 영구적인 연결이 되어있지 않고 `클라이언트 쪽에서 필요할때 Request를 할때만 서버가 Response를 하는 방식`으로 통신이 진행되는 한방향 통신이다. 
이럴경우 서버쪽 데이터가 업데이트 되더라도 클라이언트 쪽에는 화면은 Refresh하지 않는한 변경된 데이터가 업데이트 되지 않는 문제가 발생한다. 이런 문제는 데이터의 빠른 업데이트가 아주 중요한 요소 중에 
하나인 어플리케이션에서는 실시간 업데이트가 아주 중요하기 때문에 Web Socket이 아주 중요한 기술로 사용되고 있다.

Web Socket은 Stateful protocol이기 때문에 클라이언트와 한 번 연결이 되면 계속 같은 라인을 사용해서 통신하기 때문에 HTTP 사용시 필요없이 발생되는 HTTP와 TCP연결 트래픽을 피할 수 있다. 
마지막으로 Web Socket은 HTTP와 같은 포트(80)을 사용하기에 기업용 어플리케이션에 적용할 때 방화벽은 재설정 하지 않아도 되는 장점이 있다.

## 웹소켓 라이브러리 종류
#### socket.io
node.js, 자바스크립트 기반으로만들어진 소켓 라이브러리이다.

#### sockJS
자바 환경 즉, Spring 프레임워크를 사용할 때 주로 사용하는 웹소켓 라이브러리이다. 물론 프론트엔드 라인에서 자바스크립트를 지원하기도 한다.

## 작동원리
서버와 클라이언트 간의 WebSocket연결은 HTTP프로토콜을 통해 이루어집니다. 만약 연결이 정상적으로 이루어 진다면 서버와 클라이언트 간에 WebSocket연결이 이루어지고 일정 시간이 지나면
HTTP연결은 자동으로 끊어집니다. 데이터의 송신과 수신에 각각 커넥션을 맺을 필요가 없어 하나의 커넥션으로 데이터를 송수신 할 수 있다. 

## Socket.io의 이벤트 발생
소켓IO의 가장 큰 특징은 발생시키는 이벤트는 개발자가 임의로 설정할 수 있다는 점이다. 이벤트는 문자열로 지정하며 직접 이벤트를 발생시킬 수 있고, 특정인, 특정한 Area에게만 이벤트 송수신을 
할 수 있다. 
```
socket.emit('내맘대로 이벤트이름', callback => { ...code })
```

## 기존 HTML에서의 실시간 양방향 통신
### 폴링
일정한 주기를 가지고 서버와 응답을 주고 받는 방식이다  
- 만약 정보가 변하지 않으면 불필요한 서버 및 네트워크 부하가 발생한다. (불필요한 서버요청이 생긴다)  
- Ajax Polling 이라고 불리는데 주로 Ajax 호출을 사용하기 때문이다.  
- 폴링 주기가 짧으면 서버의 성능에 부담이 가고, 주기가 길면 실시간 성능이 떨어지는 문제가 있다.

#### 예시
var timer = window.setInterval(function () { ajax(); }, 1000);

### 롱폴링
서버에서 접속을 열어두는 시간을 길게하는 방식이다. 커넥션이 되어있고, 이벤트가 발생시 응답을 송수신한다.
- 이벤트 발생시 바로 응답이 이루어지기 때문에 실시간성이 아주 높다.
- 클라이언트가 많은 경우, 클라이언트에게 동시에 응답을 보내고, 또 요청을 보내야하기 때문에 순간적으로 Queue가 쌓여 서버에 무리를 주게된다. (서버오류 가능)


## 트러블 슈팅과 해결
https://velog.io/@fnjels09/%ED%95%AD%ED%95%B4-59%EC%9D%BC%EC%B0%A8-512

